<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../style/style.css">
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
    <script src="../scripts/server.js"></script>
    <script src="../scripts/highlight.js"></script>
    <script src="../scripts/keywords.js"></script>
    <script src="../scripts/main.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <div id="loading-screen" >
      <div id="progress-text">Загрузка... 0%</div>
      <div class="progress-container">
        <div id="progress-bar"></div>
      </div>
    </div>
    <div class="subtitle-container">
      <p id="answerText"></p>
    </div>
    <a-scene embedded arjs>
      <a-assets timeout="10000">
         <a-asset-item id="evenk" src="https://cdn.glitch.me/00f4b032-62b0-4e9d-b75b-91ae2acabddf/Evenk.glb?v=1746254864798"></a-asset-item>
        <a-asset-item id="scene" src="https://cdn.glitch.global/6d784e08-a317-43c7-839b-abf13c2f9b20/winter_scene.glb?v=1747209627585"></a-asset-item>
        <a-asset-item id="ski" src="https://cdn.glitch.global/6d784e08-a317-43c7-839b-abf13c2f9b20/ski.glb?v=1744693647134"></a-asset-item>
        <a-asset-item id="sleds" src="https://cdn.glitch.global/6d784e08-a317-43c7-839b-abf13c2f9b20/sanki.glb?v=1747207778845"></a-asset-item>
        <a-asset-item id="luk" src="https://cdn.glitch.global/00f4b032-62b0-4e9d-b75b-91ae2acabddf/%D0%BB%D1%83%D0%BA.glb?v=1741772626973"></a-asset-item>
        <a-asset-item id="tabl" src="https://cdn.glitch.global/00f4b032-62b0-4e9d-b75b-91ae2acabddf/%D0%BD%D0%B0%D1%81%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F%20%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%87%D0%BA%D0%B0.glb?v=1741773441792"></a-asset-item>
        <a-asset-item id="noz" src="https://cdn.glitch.global/00f4b032-62b0-4e9d-b75b-91ae2acabddf/%D0%BD%D0%BE%D0%B6.glb?v=1741773568897"></a-asset-item>
        <a-asset-item id="weap" src="https://cdn.glitch.global/00f4b032-62b0-4e9d-b75b-91ae2acabddf/%D1%80%D1%83%D0%B6%D1%8C%D0%B5.glb?v=1741774306535"></a-asset-item>
        <a-asset-item id="hold_weap" src="https://cdn.glitch.global/00f4b032-62b0-4e9d-b75b-91ae2acabddf/medieval_weapon_rack_2.glb?v=1741927662990"></a-asset-item>
        <a-asset-item id="deer" src="https://cdn.glitch.global/6d784e08-a317-43c7-839b-abf13c2f9b20/olen.glb?v=1747208146724"></a-asset-item>
      </a-assets>
      <a-marker id="marker-evenk" type="pattern" url="https://cdn.glitch.global/6d784e08-a317-43c7-839b-abf13c2f9b20/evenk.patt?v=1744605137598">
        <a-entity id="model_evenk" data-rotation="0 0 0" data-scale="0.45 0.45 0.45" data-position="0 0.65 0" rotation="0 0 0" scale="0.45 0.45 0.45" position="0 0.65 0" gltf-model="#evenk" animation-mixer="clip: stand; loop: repeat"></a-entity>
        <a-entity id="model_scene" data-rotation="0 0 0" data-scale="20 20 20" data-position="0 0 1" rotation="0 0 0" scale="20 20 20" position="0 0 1" gltf-model="#scene"></a-entity>
        <a-entity id="model_ski" data-rotation="0 120 90" data-scale="0.2 0.2 0.2" data-position="0.5 1 -0.5" rotation="0 120 90" scale="0.2 0.2 0.2" position="0.5 1 -0.5" gltf-model="#ski"></a-entity>
        <a-entity id="model_sleds" data-rotation="0 0 0" data-scale="0.5 0.5 0.5" data-position="0.4 0.65 0.2" rotation="0 0 0" scale="0.5 0.5 0.5" position="0.4 0.65 0.2" gltf-model="#sleds"></a-entity>
        <a-entity id="model_hold_weap" data-rotation="0 0 0" data-scale="0.005 0.005 0.005" data-position="-1.2 0.65 0.2" rotation="0 0 0" scale="0.005 0.005 0.005" position="-1.2 0.65 0.2" gltf-model="#hold_weap"></a-entity>
        <a-entity id="model_luk" data-rotation="0 0 90" data-scale="0.08 0.08 0.08" data-position="-1.3 0.9 0.25" rotation="0 0 90" scale="0.08 0.08 0.08" position="-1.3 0.9 0.25" gltf-model="#luk"></a-entity>
        <a-entity id="model_noz"  data-rotation="0 0 0" data-scale="0.03 0.03 0.03" data-position="-1.2 0.8 0.25" rotation="0 0 0" scale="0.03 0.03 0.03" position="-1.2 0.8 0.25" gltf-model="#noz"></a-entity>
        <a-entity id="model_weap" data-rotation="0 0 -90" data-scale="0.08 0.08 0.08" data-position="-1.1 0.9 0.25" rotation="0 0 -90" scale="0.08 0.08 0.08" position="-1.1 0.9 0.25" gltf-model="#weap"></a-entity>
        <a-entity id="model_tabl" data-rotation="30 180 0" data-scale="0.1 0.1 0.1" data-position="-1.45 0.7 0.28" rotation="30 180 0" scale="0.1 0.1 0.1" position="-1.45 0.7 0.28" gltf-model="#tabl"></a-entity>
        <a-entity id="model_deer" data-rotation="0 0 0" data-scale="0.15 0.15 0.15" data-position="1.5 0.6 -1" rotation="0 0 0" scale="0.15 0.15 0.15" position="1.5 0.6 -1" gltf-model="#deer"></a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>
    <div class="input-container">
      <input type="text" id="questionInput" placeholder="Введите ваше сообщение..." aria-label="Введите ваше сообщение">
      <button onclick="submitQuestion()">Отправить</button>
      <button class="microphone-button" aria-label="Запись" 
              onmousedown="startRecording()" 
              onmouseup="stopRecording()" 
              ontouchstart="startRecording()" 
              ontouchend="stopRecording()">
          <svg class="microphone-icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
              <path fill="white" d="M12 14c1.659 0 3-1.343 3-3V6c0-1.657-1.341-3-3-3S9 4.343 9 6v5c0 1.657 1.341 3 3 3zm6-3c0 3.313-2.687 6-6 6s-6-2.687-6-6h-2c0 4.418 3.582 8 8 8s8-3.582 8-8h-2z"/>
          </svg>
      </button>
    </div>
    <script src="../scripts/voice.js"></script>
    <script src="../scripts/loaded.js"></script>
  </body>
</html>